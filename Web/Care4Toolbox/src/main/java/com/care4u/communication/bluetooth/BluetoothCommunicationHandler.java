package com.care4u.communication.bluetooth;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.charset.Charset;
import java.util.Calendar;

import javax.microedition.io.StreamConnection;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.care4u.common.GlobalConstants;

public class BluetoothCommunicationHandler {

	private static final Logger logger = LoggerFactory.getLogger(BluetoothCommunicationHandler.class);

	private String macaddress;
	private boolean startedOK;
	
	private long commTimeInMillis;
	
	private Translator translator;
	private Translator.Listener traslatorListener = new Translator.Listener() {
		
		@Override
		public void onException(Exception ex) {
			// TODO Auto-generated method stub
			connectorHandler.disconnect();
			if (listener != null) listener.onException(BluetoothCommunicationHandler.this, ex.toString());
		}
		
		@Override
		public void onDataArrived(byte[] datas) {
			// TODO Auto-generated method stub
			if (listener != null) listener.onDataArrived(BluetoothCommunicationHandler.this, new String(datas));
			commTimeInMillis = 0;
		}
	};
	
	private final BluetoothConnectHandler.Listener connectorHandlerListener =  new BluetoothConnectHandler.Listener() {
		@Override
        public void onException(String description) {
            // TODO Auto-generated method stub
			if (listener != null) listener.onException(BluetoothCommunicationHandler.this, description);            
        }
        @Override
        public void onDataArrived(byte[] datas) {
            // TODO Auto-generated method stub
        	commTimeInMillis = Calendar.getInstance().getTimeInMillis();
        	while(datas != null) {
        		datas = translator.process(datas);
        	}
        	
        	/*
        	if (new String(datas).equals("REQUEST_StandardDB")) {
        		if (translator != null) translator.setSendingMessage("{\"type\":2,\"page\":{\"content\":[{\"id\":72,\"name\":\"에어임팩트렌치\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"A330005\",\"buyCode\":null,\"engName\":\"Air Impact Wrench\",\"spec\":\"\\\"IR2145 3/4\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":74,\"name\":\"스트레이트그라인더\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"A500048\",\"buyCode\":null,\"engName\":\"Portable Grinder\",\"spec\":\"GGS 6S\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":76,\"name\":\"휴대용용접기\",\"subGroupDto\":{\"id\":75,\"name\":\"용접기\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B120027\",\"buyCode\":null,\"engName\":\"Inverter Dc Arc Wlding Machine\",\"spec\":\"\\\"웰드월200LD2\",\"unit\":\"홀더10M\",\"price\":0,\"replacementCycle\":0},{\"id\":77,\"name\":\"아크용접기\",\"subGroupDto\":{\"id\":75,\"name\":\"용접기\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B120028\",\"buyCode\":null,\"engName\":\"AC ARC Welder\",\"spec\":\"480A/20KW\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":78,\"name\":\"아크용접기\",\"subGroupDto\":{\"id\":75,\"name\":\"용접기\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B120031\",\"buyCode\":null,\"engName\":\"AC ARC Welder\",\"spec\":\"15K 예인테크\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":79,\"name\":\"휴대용용접기\",\"subGroupDto\":{\"id\":75,\"name\":\"용접기\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B120032\",\"buyCode\":null,\"engName\":\"Inverter Dc Arc Wlding Machine\",\"spec\":\"S230 TAIKEN PLUS\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":80,\"name\":\"전동체인블럭\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B200011\",\"buyCode\":null,\"engName\":\"Electric Chain Hoist\",\"spec\":\"1000Kg(양정7M)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":82,\"name\":\"전동미니윈치\",\"subGroupDto\":{\"id\":81,\"name\":\"건설공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B200013\",\"buyCode\":null,\"engName\":\"Electric Mine Winch\",\"spec\":\"300kg\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":83,\"name\":\"체인블럭\",\"subGroupDto\":{\"id\":81,\"name\":\"건설공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B200014\",\"buyCode\":null,\"engName\":\"Chain Block\",\"spec\":\"5 Ton (대경)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":84,\"name\":\"도르래\",\"subGroupDto\":{\"id\":81,\"name\":\"건설공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B200015\",\"buyCode\":null,\"engName\":\"도르래\",\"spec\":\"2WEEL.17T.200mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":85,\"name\":\"마그네트(인양자석)\",\"subGroupDto\":{\"id\":81,\"name\":\"건설공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B200016\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SPM-50/490kg\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":87,\"name\":\"산소대차(Steel)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300001\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"16\\\"\\\"호스릴\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":88,\"name\":\"산소대차셋(Steel)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300002\",\"buyCode\":null,\"engName\":\"리프트 대차\",\"spec\":\"쌍줄 절단기 조정기포함함\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":89,\"name\":\"산소대차(steel)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300003\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"16\\\"\\\"호스릴/ss400\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":90,\"name\":\"공구이동대차(구형)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300060\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SW-A2SID95(900*500880)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":91,\"name\":\"공구이동대차(신형Steel)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300062\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"TPU9-2SRC-SDI-GT-6CA-S\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":92,\"name\":\"이동형공구걸이대\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300063\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SS-AM915에스앤에스(910*480*1675)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":93,\"name\":\"공구수리대\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300064\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SB-SUSM1D1P(1800*900*820에스앤에스\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":94,\"name\":\"테이블트럭\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300065\",\"buyCode\":null,\"engName\":\"Table Truck\",\"spec\":\"TF-30A(UDT)815*500\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":95,\"name\":\"공구쎌빙\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300066\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SC-BW3R2W(SP)1200*500*1825 2줄4칸에스앤에스\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":96,\"name\":\"공구쎌빙\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300067\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SC-BW4R3W(SP)1200*500*1825 3줄5칸에스앤에스\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":97,\"name\":\"공구쎌빙\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300068\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"SC-BW4R4W(SP)1200*500*1825 4줄5칸 에스앤에스\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":98,\"name\":\"작업대\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300073\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"RWB-MW157F록키제작(1400*900*830)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":99,\"name\":\"공구이동대차(신형SUS)\",\"subGroupDto\":{\"id\":86,\"name\":\"대차및공구함\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B300075\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"TPU9-2SRC-SDI-GT-6CA-S(외부써스제작)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":101,\"name\":\"콤비스패너(방폭)\",\"subGroupDto\":{\"id\":100,\"name\":\"체결공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B310000\",\"buyCode\":null,\"engName\":\"Combaination Wrench(방폭)\",\"spec\":\"17mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":103,\"name\":\"전동송기마스크\",\"subGroupDto\":{\"id\":102,\"name\":\"안전보호구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B320001\",\"buyCode\":null,\"engName\":\"송기마스크\",\"spec\":\"HM-12A\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":105,\"name\":\"안전블럭\",\"subGroupDto\":{\"id\":104,\"name\":\"기타\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B320003\",\"buyCode\":null,\"engName\":\"안전블럭\",\"spec\":\"25M\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":106,\"name\":\"안전블럭(미니)\",\"subGroupDto\":{\"id\":102,\"name\":\"안전보호구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B320006\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"성안 3.5M\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":107,\"name\":\"에어임팩트렌치\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330010\",\"buyCode\":null,\"engName\":\"Air Impact Wrench\",\"spec\":\"1인치 IR295A\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":108,\"name\":\"에어제트치즐\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330020\",\"buyCode\":null,\"engName\":\"Air Jit Chisel\",\"spec\":\"jex-24\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":109,\"name\":\"에어브레카\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330021\",\"buyCode\":null,\"engName\":\"Air Breaker\",\"spec\":\"AA-3B\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":110,\"name\":\"에어브레카\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330022\",\"buyCode\":null,\"engName\":\"Air Breaker\",\"spec\":\"CA-7\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":111,\"name\":\"에어임팩트렌치\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330027\",\"buyCode\":null,\"engName\":\"Air Impact Wrench\",\"spec\":\"\\\"1\\\"\\\"GT-P32J VESSEL\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":112,\"name\":\"에어그리스펌프\",\"subGroupDto\":{\"id\":71,\"name\":\"에어공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B330028\",\"buyCode\":null,\"engName\":\"Air Grease Pump\",\"spec\":\"CP96\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":114,\"name\":\"유압잭 램(LOW)\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400010\",\"buyCode\":null,\"engName\":\"Hydraulic Jack Ram\",\"spec\":\"TSLC 50Ton  S16mm  H67mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":115,\"name\":\"유압잭 램(쇼트램)\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400013\",\"buyCode\":null,\"engName\":\"Hydraulic Jack Ram\",\"spec\":\"TSSC 50Ton S 50mm  H 109mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":116,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400016\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"80mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":117,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400018\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"1 1/2\\\"\\\" 90mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":118,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400019\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"1 1/2\\\"\\\" 95mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":119,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400020\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 100mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":120,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400021\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 105mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":121,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400022\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 110mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":122,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400023\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 115mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":123,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400024\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 120mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":124,\"name\":\"유압파이프벤더\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400026\",\"buyCode\":null,\"engName\":\"Hydraulic Pipe Bender\",\"spec\":\"1/2'~2'\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":125,\"name\":\"유압잭 램(쇼트램)\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400027\",\"buyCode\":null,\"engName\":\"Hydraulic Jack Ram\",\"spec\":\"TSSC 100Ton S50mm  H139mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":126,\"name\":\"유압 알미늄잭램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400028\",\"buyCode\":null,\"engName\":\"Hydraulic Aluminum Jack Ram\",\"spec\":\"TAR 20Ton150mm H250mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":127,\"name\":\"유압 알미늄잭램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400031\",\"buyCode\":null,\"engName\":\"Hydraulic Aluminum Jack Ram\",\"spec\":\"TAR 50Ton S50mm  H182mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":129,\"name\":\"유압너트컷터\",\"subGroupDto\":{\"id\":128,\"name\":\"방폭공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400040\",\"buyCode\":null,\"engName\":\"Pipe Cutter\",\"spec\":\"M12~24mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":130,\"name\":\"유압잭 램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400042\",\"buyCode\":null,\"engName\":\"Hydraulic Jack Ram\",\"spec\":\"TS 20Ton S200mm H 315mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":131,\"name\":\"유압 알미늄잭램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400045\",\"buyCode\":null,\"engName\":\"Hydraulic Aluminum Jack Ram\",\"spec\":\"TAR-10050/100Ton/193mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":132,\"name\":\"유압 알미늄잭램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400046\",\"buyCode\":null,\"engName\":\"Hydraulic Aluminum Jack Ram\",\"spec\":\"TAR-30100/30Ton/218mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":133,\"name\":\"유압 알미늄잭램\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400047\",\"buyCode\":null,\"engName\":\"Hydraulic Aluminum Jack Ram\",\"spec\":\"TAR-50150/50Ton/282mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":134,\"name\":\"유압너트컷터\",\"subGroupDto\":{\"id\":128,\"name\":\"방폭공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400049\",\"buyCode\":null,\"engName\":\"Hydraulic Net Cutter\",\"spec\":\"NC13~19mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":135,\"name\":\"유압베어링플러셋\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400058\",\"buyCode\":null,\"engName\":\"Hydraulic Bearing Puller Set\",\"spec\":\"PH82K\",\"unit\":\"SET\",\"price\":0,\"replacementCycle\":0},{\"id\":136,\"name\":\"유압쎈타홀잭\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400060\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"TCH-5075\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":137,\"name\":\"유압쎈타홀잭\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400061\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"TCH-2050\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":138,\"name\":\"산소호스 압착기\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400064\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"HHC-150A(HELIX)397mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":139,\"name\":\"유압토크렌치아답타\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400065\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"80~1 1/2\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":140,\"name\":\"유압토크렌치아답타\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400066\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"60~1\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":141,\"name\":\"토크렌치발력패드\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400067\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"ST-4\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":142,\"name\":\"토크렌치발력패드\",\"subGroupDto\":{\"id\":113,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B400068\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"ST8\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":143,\"name\":\"전동함석가위\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500017\",\"buyCode\":null,\"engName\":\"Electric Metal Shear\",\"spec\":\"GSC-2.8\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":144,\"name\":\"전동멀티마스타(다용도톱)\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500021\",\"buyCode\":null,\"engName\":\"Electric Multinasster\",\"spec\":\"250Q\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":145,\"name\":\"전동니브러\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500027\",\"buyCode\":null,\"engName\":\"Electric Nibbler\",\"spec\":\"GNA 3.5\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":146,\"name\":\"충전 임팩드릴\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500029\",\"buyCode\":null,\"engName\":\"Cordless Impact Drill\",\"spec\":\"18V(드릴용)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":147,\"name\":\"전동브레카\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500032\",\"buyCode\":null,\"engName\":\"Electric Demolition Hammer\",\"spec\":\"GSH 16보쉬\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":148,\"name\":\"전동해머드릴\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500033\",\"buyCode\":null,\"engName\":\"Electric Hammer Drill\",\"spec\":\"PHD40\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":149,\"name\":\"전동임팩트렌치\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500034\",\"buyCode\":null,\"engName\":\"Electric Impact Wrench\",\"spec\":\"\\\"3/4\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":150,\"name\":\"전동스트레이트그라인더\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500041\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"GGS6S.5인치\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":151,\"name\":\"전동체인블럭\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500043\",\"buyCode\":null,\"engName\":\"Electric Chain Hoist\",\"spec\":\"DU901/490KG 양정(15M)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":152,\"name\":\"충전 임팩트렌치\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500044\",\"buyCode\":null,\"engName\":\"Cordless Impact Wrench\",\"spec\":\"18V보쉬 GDS 18V-EC\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":153,\"name\":\"충전 해머드릴\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500045\",\"buyCode\":null,\"engName\":\"Cordless Hammer Drill\",\"spec\":\"18V 보쉬\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":154,\"name\":\"전동코너드릴\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500046\",\"buyCode\":null,\"engName\":\"Electric Corner Drill\",\"spec\":\"DA-3010F(마끼다)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":155,\"name\":\"충전 코너임팩트렌치\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500050\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"TL065DSAE 3/8\\\"\\\"마끼타\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":156,\"name\":\"휴대용배터리\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500051\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"48V\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":157,\"name\":\"DC인버터\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500052\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"48V/3000W\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":158,\"name\":\"충전 임팩트렌치\",\"subGroupDto\":{\"id\":73,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B500053\",\"buyCode\":null,\"engName\":\"Cordless Impact Wrench\",\"spec\":\"보쉬GDX18V-200C\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":160,\"name\":\"가스 곡선 자동절단기\",\"subGroupDto\":{\"id\":159,\"name\":\"절삭공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B600002\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"유광YK-72D\",\"unit\":\"DE\",\"price\":0,\"replacementCycle\":0},{\"id\":161,\"name\":\"마그네트 자동절단기 레일\",\"subGroupDto\":{\"id\":104,\"name\":\"기타\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B600003\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"고무-YK-72D/ 1M\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":162,\"name\":\"파이프다이스\",\"subGroupDto\":{\"id\":159,\"name\":\"절삭공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B600004\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"\\\"PT 2\\\"\\\"  11.5 SKC\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":163,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":100,\"name\":\"체결공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B700272\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"85MM\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":164,\"name\":\"유압토크렌치소켓\",\"subGroupDto\":{\"id\":100,\"name\":\"체결공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B700273\",\"buyCode\":null,\"engName\":\"Hydraulic Torque Wrench Socket\",\"spec\":\"\\\"2\\\"\\\" 125mm\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":165,\"name\":\"육각렌치\",\"subGroupDto\":{\"id\":100,\"name\":\"체결공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B700274\",\"buyCode\":null,\"engName\":\"Hexagon Wrench\",\"spec\":\"2mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":167,\"name\":\"마이크로메타\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800004\",\"buyCode\":null,\"engName\":\"INSIDE MICROMETER\",\"spec\":\"1000mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":168,\"name\":\"버니어캘리퍼스\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800007\",\"buyCode\":null,\"engName\":\"Vernier Caliper\",\"spec\":\"600mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":169,\"name\":\"토크렌치\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800011\",\"buyCode\":null,\"engName\":\"Torque Wrench\",\"spec\":\"\\\"1\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":170,\"name\":\"토크렌치\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800013\",\"buyCode\":null,\"engName\":\"Torque Wrench\",\"spec\":\"\\\"1/2\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":171,\"name\":\"소음측정기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800014\",\"buyCode\":null,\"engName\":\"소음계\",\"spec\":\"TESI351(TES)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":172,\"name\":\"진동측정기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800015\",\"buyCode\":null,\"engName\":\"진동계\",\"spec\":\"ACO-3116\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":173,\"name\":\"레벨기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800016\",\"buyCode\":null,\"engName\":\"AUTO LEVEL\",\"spec\":\"NA-720\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":174,\"name\":\"금속탐지기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800017\",\"buyCode\":null,\"engName\":\"Metal Detector(금속탐지기)\",\"spec\":\"ZIRCON  MT 6\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":175,\"name\":\"레이져거리측정기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800018\",\"buyCode\":null,\"engName\":\"Laser Distance Meter\",\"spec\":\"GLM-250VF\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":176,\"name\":\"용접각도기\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800019\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"45~90\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":177,\"name\":\"공업용내시경카메라\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800020\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"GIC120C\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":178,\"name\":\"디지텰버니어캘리퍼스\",\"subGroupDto\":{\"id\":166,\"name\":\"측정공구\",\"mainGroupDto\":{\"id\":70,\"name\":\"내구성공기구\"}},\"code\":\"B800021\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"300mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1349,\"name\":\"파이프컷터(방폭)\",\"subGroupDto\":{\"id\":1287,\"name\":\"방폭공구\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A310021\",\"buyCode\":null,\"engName\":\"Pipe Cutter(로타리)\",\"spec\":\"400~450mm\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1350,\"name\":\"파이프컷터(방폭)\",\"subGroupDto\":{\"id\":1287,\"name\":\"방폭공구\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A310024\",\"buyCode\":null,\"engName\":\"Pipe Cutter\",\"spec\":\"\\\"8'~12\\\"\\\"\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1351,\"name\":\"포터블베어링히팅기\",\"subGroupDto\":{\"id\":1264,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A500049\",\"buyCode\":null,\"engName\":\"Portable Bearing Heater\",\"spec\":\"EDDYTHERM/PORTABLE\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1353,\"name\":\"프라즈마절단기\",\"subGroupDto\":{\"id\":1352,\"name\":\"특수절단기\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A110002\",\"buyCode\":null,\"engName\":\"Air Plasma Cutting Machine\",\"spec\":\"이수-P-20/3P220V\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1354,\"name\":\"프라즈마절단기\",\"subGroupDto\":{\"id\":1352,\"name\":\"특수절단기\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A110008\",\"buyCode\":null,\"engName\":\"Air Plasma Cutting Machine\",\"spec\":\"PowerMax30(소형)\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1355,\"name\":\"프라즈마절단기\",\"subGroupDto\":{\"id\":1352,\"name\":\"특수절단기\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A110011\",\"buyCode\":null,\"engName\":\"Air Plasma Cutting Machine\",\"spec\":\"PowerMax105\",\"unit\":\"SET\",\"price\":0,\"replacementCycle\":0},{\"id\":1356,\"name\":\"프라즈마절단기(에어일체형)\",\"subGroupDto\":{\"id\":1352,\"name\":\"특수절단기\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A110009\",\"buyCode\":null,\"engName\":\"Air Plasma Cutting Machine\",\"spec\":\"PowerMax30(소형)\",\"unit\":\"SET\",\"price\":0,\"replacementCycle\":0},{\"id\":1357,\"name\":\"프렌지 스프레더\",\"subGroupDto\":{\"id\":1283,\"name\":\"유압공구\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A400086\",\"buyCode\":null,\"engName\":\"\",\"spec\":\"HFS6A파워템\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0},{\"id\":1358,\"name\":\"휴대용나사가공기\",\"subGroupDto\":{\"id\":1264,\"name\":\"전동공구\",\"mainGroupDto\":{\"id\":1252,\"name\":\"자산성공기구\"}},\"code\":\"A500016\",\"buyCode\":null,\"engName\":\"휴대용나사가공기\",\"spec\":\"\\\"1/2\\\"\\\"~50mm 림스\\\"\",\"unit\":\"EA\",\"price\":0,\"replacementCycle\":0}],\"pageable\":{\"sort\":{\"sorted\":false,\"unsorted\":true,\"empty\":true},\"pageSize\":1246,\"pageNumber\":0,\"offset\":0,\"unpaged\":false,\"paged\":true},\"last\":true,\"totalPages\":1,\"totalElements\":1246,\"number\":0,\"sort\":{\"sorted\":false,\"unsorted\":true,\"empty\":true},\"first\":true,\"numberOfElements\":1246,\"size\":1246,\"empty\":false}}");
        	} else if (new String(datas).equals("REQUEST_RentalRequestSheetList")) {
        		if (translator != null) translator.setSendingMessage("Ready");
        	}
        	if (translator != null) translator.onReceivedString(BluetoothCommunicationHandler.this, new String(datas));
        	*/
        }
        @Override
        public void onConnected() {
            // TODO Auto-generated method stub
        	startedOK = true;
        	if (listener != null) listener.onConnected(BluetoothCommunicationHandler.this);
        }
        @Override
        public void onDisconnected(){
        	if (listener != null) listener.onDisconnected(BluetoothCommunicationHandler.this);
        }
	};
	
	private BluetoothConnectHandler connectorHandler;
			
	public interface Listener{
		public void onDataArrived(BluetoothCommunicationHandler handler, String data);
		public void onConnected(BluetoothCommunicationHandler handler);
		public void onDataSent(BluetoothCommunicationHandler handler, String data);
		public void onException(BluetoothCommunicationHandler handler, String message);
		public void onDisconnected(BluetoothCommunicationHandler handler);
		
		//public void onRequestedMembershipAll(BluetoothCommunicationHandler handler);
	}
	private Listener listener;
	
	public BluetoothCommunicationHandler(String macaddress, StreamConnection streamConnection, BluetoothCommunicationHandler.Listener listener) {
		// TODO Auto-generated constructor stub
		this.listener = listener;
		
		this.macaddress = macaddress;
		
		translator = new Translator(traslatorListener);
		
		commTimeInMillis = 0;
		
		connectorHandler = new BluetoothConnectHandler(streamConnection, connectorHandlerListener);
	}
	
	public void sendData(String message){
		logger.info("send message : " + message);
	    byte[] data = message.getBytes();
	    ByteBuffer buffer = ByteBuffer.allocate(4); // int는 4바이트
	    buffer.putInt(data.length);
	    byte[] sizeByte = buffer.array();
	    
	    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
	    try {
	    	outputStream.write(sizeByte);
	        outputStream.write(data);
	    } catch (IOException e) {
	        e.printStackTrace();
	    }
	    
	    byte[] finalData = outputStream.toByteArray();
	    connectorHandler.sendData(finalData);
	}
	
	public void disconnect(){
		logger.debug("disconnect...");
		if (connectorHandler != null) {
			connectorHandler.disconnect();
		}
		connectorHandler = null;
	}

	public String getMacaddress() {
		return macaddress;
	}
	
	public boolean isValid() {
		if (startedOK && connectorHandler.isConnected()) {
			if (commTimeInMillis == 0) {
				return true;
			}
			
			long diff = Calendar.getInstance().getTimeInMillis() - commTimeInMillis;
			if (diff < GlobalConstants.COMMUNICATION_TIMEOUT * 1000) {
				return true;
			}
		}
		
		return false;
	}

}